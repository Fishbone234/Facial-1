<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
                        <td>å¹¿æ³›</td>
                        <td>ä¸ªäººè®¾å¤‡</td>
                        <td>é«˜å®‰å…¨</td>
                        <td>ç”µè¯æœåŠ¡</td>
                    </tr>
                </tbody>
            </table>
            
            <h2 class="section-title" style="margin-top: 60px;">
                <i class="fas fa-cogs"></i> æ ¸å¿ƒæŠ€æœ¯åŸç†
            </h2>
            
            <div class="features-grid" style="margin-top: 30px;">
                <div class="feature-card">
                    <h3>1. é¢éƒ¨æ£€æµ‹</h3>
                    <p>ä½¿ç”¨Haarçº§è”åˆ†ç±»å™¨æˆ–æ·±åº¦å­¦ä¹ æ¨¡å‹å®šä½äººè„¸ä½ç½®</p>
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin-top: 15px;">
                        <code style="font-family: monospace; color: #4285F4;">
                            # OpenCVäººè„¸æ£€æµ‹ç¤ºä¾‹<br>
                            faces = face_cascade.detectMultiScale(image)
                        </code>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h3>2. ç‰¹å¾æå–</h3>
                    <p>é€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œæå–128-512ç»´é¢éƒ¨ç‰¹å¾å‘é‡</p>
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin-top: 15px;">
                        <code style="font-family: monospace; color: #4285F4;">
                            # FaceNetç‰¹å¾æå–<br>
                            embeddings = model.predict(face_image)
                        </code>
                    </div>
                </div>
                
                <div class="feature-card">
                    <h3>3. ç‰¹å¾åŒ¹é…</h3>
                    <p>è®¡ç®—ç‰¹å¾å‘é‡é—´çš„æ¬§æ°è·ç¦»æˆ–ä½™å¼¦ç›¸ä¼¼åº¦</p>
                    <div style="background: #e8f4fd; padding: 15px; border-radius: 10px; margin-top: 15px;">
                        <code style="font-family: monospace; color: #4285F4;">
                            # ç›¸ä¼¼åº¦è®¡ç®—<br>
                            distance = np.linalg.norm(emb1 - emb2)
                        </code>
                    </div>
                </div>
            </div>
            
            <h2 class="section-title" style="margin-top: 60px;">
                <i class="fas fa-exclamation-triangle"></i> æŒ‘æˆ˜ä¸ä¼¦ç†é—®é¢˜
            </h2>
            
            <div style="background: #fff3e0; padding: 25px; border-radius: 15px; margin-top: 20px;">
                <h3>ä¸»è¦æŒ‘æˆ˜</h3>
                <ul style="margin-top: 15px; padding-left: 20px;">
                    <li><strong>å…‰ç…§å˜åŒ–</strong>ï¼šä¸åŒå…‰ç…§æ¡ä»¶ä¸‹è¯†åˆ«å‡†ç¡®ç‡ä¸‹é™</li>
                    <li><strong>å§¿æ€å˜åŒ–</strong>ï¼šå¤´éƒ¨æ—‹è½¬è§’åº¦å½±å“è¯†åˆ«æ•ˆæœ</li>
                    <li><strong>å¹´é¾„å˜åŒ–</strong>ï¼šé•¿æ—¶é—´è·¨åº¦é¢éƒ¨å˜åŒ–å¯¼è‡´è¯†åˆ«å›°éš¾</li>
                    <li><strong>é®æŒ¡é—®é¢˜</strong>ï¼šå£ç½©ã€çœ¼é•œç­‰é®æŒ¡ç‰©å½±å“è¯†åˆ«</li>
                </ul>
                
                <h3 style="margin-top: 25px;">ä¼¦ç†ä¸éšç§é—®é¢˜</h3>
                <ul style="margin-top: 15px; padding-left: 20px;">
                    <li>æœªç»æˆæƒçš„ç›‘æ§å’Œæ•°æ®æ”¶é›†</li>
                    <li>ç®—æ³•åè§å’Œæ­§è§†é—®é¢˜</li>
                    <li>ä¸ªäººç”Ÿç‰©ä¿¡æ¯çš„å®‰å…¨å­˜å‚¨</li>
                    <li>æ³•å¾‹æ³•è§„å’Œç›‘ç®¡æ¡†æ¶</li>
                </ul>
            </div>
        </div>
        
        <!-- åŸå‹é¡µé¢å†…å®¹ -->
        <div id="prototype" class="tab-content">
            <h2 class="section-title">
                <i class="fas fa-laptop-code"></i> é¢éƒ¨è¯†åˆ«ç³»ç»ŸåŸå‹
            </h2>
            <p>äº¤äº’å¼é¢éƒ¨è¯†åˆ«æ¨¡æ‹Ÿç³»ç»Ÿï¼Œä½“éªŒå®Œæ•´è¯†åˆ«æµç¨‹</p>
            
            <div class="demo-container">
                <!-- å·¦ä¾§ï¼šé¢éƒ¨æ‰«æåŒºåŸŸ -->
                <div class="demo-panel">
                    <div class="face-scanner">
                        <h3><i class="fas fa-camera"></i> é¢éƒ¨æ‰«ææ¨¡æ‹Ÿ</h3>
                        <div class="scanner-frame">
                            <div class="face-overlay"></div>
                            <div class="scan-grid"></div>
                            <div class="scan-line"></div>
                            <!-- é¢éƒ¨ç‰¹å¾ç‚¹ -->
                            <div class="landmark-point" style="top: 40%; left: 30%;"></div>
                            <div class="landmark-point" style="top: 40%; left: 70%;"></div>
                            <div class="landmark-point" style="top: 55%; left: 50%;"></div>
                            <div class="landmark-point" style="top: 70%; left: 50%;"></div>
                        </div>
                        <p>æ¨¡æ‹Ÿæ‘„åƒå¤´æ•æ‰é¢éƒ¨å›¾åƒ</p>
                        <button class="btn btn-primary" onclick="startFaceScan()">
                            <i class="fas fa-play"></i> å¼€å§‹é¢éƒ¨æ‰«æ
                        </button>
                    </div>
                    
                    <!-- é¢éƒ¨ç‰¹å¾å¯è§†åŒ– -->
                    <div class="face-features" style="margin-top: 30px;">
                        <div class="feature-item">
                            <div style="font-size: 1.5rem; color: #4285F4;">68</div>
                            <div>ç‰¹å¾ç‚¹</div>
                        </div>
                        <div class="feature-item">
                            <div style="font-size: 1.5rem; color: #34A853;">128</div>
                            <div>ç‰¹å¾ç»´åº¦</div>
                        </div>
                        <div class="feature-item">
                            <div style="font-size: 1.5rem; color: #EA4335;">99.7%</div>
                            <div>å‡†ç¡®ç‡</div>
                        </div>
                    </div>
                </div>
                
                <!-- å³ä¾§ï¼šç”¨æˆ·æ“ä½œåŒºåŸŸ -->
                <div class="demo-panel">
                    <h3><i class="fas fa-user-plus"></i> ç”¨æˆ·æ³¨å†Œ</h3>
                    
                    <div class="form-group">
                        <label for="userName">å§“å</label>
                        <input type="text" id="userName" placeholder="è¯·è¾“å…¥å§“å">
                    </div>
                    
                    <div class="form-group">
                        <label for="userID">ç”¨æˆ·ID</label>
                        <input type="text" id="userID" placeholder="å­¦å·æˆ–å·¥å·">
                    </div>
                    
                    <div class="form-group">
                        <label for="userRole">ç”¨æˆ·ç±»å‹</label>
                        <select id="userRole">
                            <option value="student">å­¦ç”Ÿ</option>
                            <option value="teacher">æ•™å¸ˆ</option>
                            <option value="staff">å‘˜å·¥</option>
                            <option value="admin">ç®¡ç†å‘˜</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-success" onclick="registerUser()" style="width: 100%;">
                        <i class="fas fa-user-check"></i> æ³¨å†Œç”¨æˆ·å¹¶é‡‡é›†é¢éƒ¨
                    </button>
                    
                    <div id="registerResult" class="result-box"></div>
                    
                    <div style="margin-top: 30px;">
                        <h3><i class="fas fa-sign-in-alt"></i> é¢éƒ¨éªŒè¯</h3>
                        <button class="btn btn-primary" onclick="verifyFace()" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-fingerprint"></i> è¿›è¡Œé¢éƒ¨éªŒè¯
                        </button>
                        <div id="verifyResult" class="result-box"></div>
                    </div>
                </div>
            </div>
            
            <!-- ç”¨æˆ·ç®¡ç†é¢æ¿ -->
            <div style="margin-top: 40px; background: #f8f9fa; padding: 25px; border-radius: 15px;">
                <h3><i class="fas fa-users"></i> å·²æ³¨å†Œç”¨æˆ·</h3>
                <div id="userList" style="margin-top: 20px;">
                    <p>æš‚æ— æ³¨å†Œç”¨æˆ·ï¼Œè¯·å…ˆæ³¨å†Œæ–°ç”¨æˆ·ã€‚</p>
                </div>
                <button class="btn" onclick="loadUsers()" style="background: #5C6BC0; color: white; margin-top: 15px;">
                    <i class="fas fa-sync-alt"></i> åˆ·æ–°ç”¨æˆ·åˆ—è¡¨
                </button>
            </div>
            
            <!-- æŠ€æœ¯å‚æ•°å±•ç¤º -->
            <div style="margin-top: 40px; padding: 25px; background: linear-gradient(135deg, #e3f2fd, #f3e5f5); border-radius: 15px;">
                <h3><i class="fas fa-chart-line"></i> æŠ€æœ¯å‚æ•°æ¨¡æ‹Ÿ</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: #4285F4;">CNNæ¨¡å‹</div>
                        <div style="font-size: 0.9rem; color: #666;">ResNet-50</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: #34A853;">å¤„ç†æ—¶é—´</div>
                        <div style="font-size: 0.9rem; color: #666;">1.2ç§’</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: #EA4335;">é”™è¯¯ç‡</div>
                        <div style="font-size: 0.9rem; color: #666;">0.3%</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: #FF9800;">æ”¯æŒè§’åº¦</div>
                        <div style="font-size: 0.9rem; color: #666;">Â±30Â°</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- éƒ¨ç½²é¡µé¢å†…å®¹ -->
        <div id="deploy" class="tab-content">
            <div class="share-section">
                <h2><i class="fas fa-link"></i> è·å–é¡¹ç›®é“¾æ¥</h2>
                <p style="font-size: 1.1rem; margin: 20px 0;">
                    å¤åˆ¶ä¸‹é¢çš„é“¾æ¥ï¼Œå³å¯åœ¨ä»»ä½•è®¾å¤‡ä¸Šè®¿é—®è¿™ä¸ªé¢éƒ¨è¯†åˆ«é¡¹ç›®
                </p>
                
                <div class="url-display" id="projectUrl">
                    æ­£åœ¨è·å–å½“å‰ç½‘å€...
                </div>
                
                <div class="share-buttons">
                    <button class="share-btn copy" onclick="copyProjectUrl()">
                        <i class="fas fa-copy"></i> å¤åˆ¶é“¾æ¥
                    </button>
                    <button class="share-btn test" onclick="testProjectUrl()">
                        <i class="fas fa-external-link-alt"></i> æµ‹è¯•é“¾æ¥
                    </button>
                    <button class="share-btn qr" onclick="showQRCode()">
                        <i class="fas fa-qrcode"></i> ç”ŸæˆäºŒç»´ç 
                    </button>
                </div>
                
                <div id="qrCodeContainer" style="display: none; margin-top: 30px;">
                    <div style="background: white; padding: 20px; border-radius: 10px; display: inline-block;">
                        <div style="font-family: monospace; font-size: 12px; line-height: 12px; letter-spacing: 1px;">
                            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<br>
                            â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ<br>
                            â–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆ<br>
                            â–ˆâ–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–ˆ<br>
                            â–ˆâ–‘â–ˆâ–‘â–ˆâ–ˆâ–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–ˆâ–ˆâ–‘â–ˆâ–‘â–ˆ<br>
                            â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆâ–‘â–ˆ<br>
                            â–ˆâ–‘â–ˆâ–‘â–ˆâ–ˆâ–ˆâ–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–ˆâ–ˆâ–ˆâ–‘â–ˆâ–‘â–ˆ<br>
                            â–ˆâ–‘â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–ˆ<br>
                            â–ˆâ–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–ˆ<br>
                            â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆ<br>
                            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">æ‰«æäºŒç»´ç è®¿é—®é¡¹ç›®</p>
                    </div>
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 30px; border-radius: 15px; margin-top: 30px;">
                <h3><i class="fas fa-share-alt"></i> åˆ†äº«æŒ‡å—</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; color: #09BB07; margin-bottom: 10px;">
                            <i class="fab fa-weixin"></i>
                        </div>
                        <h4>å¾®ä¿¡åˆ†äº«</h4>
                        <p>å¤åˆ¶é“¾æ¥ï¼Œç²˜è´´åˆ°å¾®ä¿¡èŠå¤©çª—å£å‘é€</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; color: #12B7F5; margin-bottom: 10px;">
                            <i class="fab fa-qq"></i>
                        </div>
                        <h4>QQåˆ†äº«</h4>
                        <p>å¤åˆ¶é“¾æ¥ï¼Œå‘é€åˆ°QQç¾¤æˆ–å¥½å‹</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; color: #DB4437; margin-bottom: 10px;">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <h4>é‚®ä»¶æäº¤</h4>
                        <p>å°†é“¾æ¥ç²˜è´´åˆ°ä½œä¸šé‚®ä»¶ä¸­æäº¤</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2rem; color: #333; margin-bottom: 10px;">
                            <i class="fas fa-link"></i>
                        </div>
                        <h4>ç›´æ¥è®¿é—®</h4>
                        <p>åœ¨æµè§ˆå™¨åœ°å€æ ç›´æ¥è¾“å…¥é“¾æ¥</p>
                    </div>
                </div>
            </div>
            
            <div style="background: #e8f5e9; padding: 25px; border-radius: 15px; margin-top: 30px;">
                <h3><i class="fas fa-lightbulb"></i> ä½¿ç”¨æç¤º</h3>
                <ul style="margin-top: 15px; padding-left: 20px;">
                    <li>è¿™ä¸ªé“¾æ¥å¯ä»¥åœ¨æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ä¸Šæ‰“å¼€</li>
                    <li>æ— éœ€ç™»å½•ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®</li>
                    <li>å¦‚æœä¿®æ”¹äº†ä»£ç ï¼Œéœ€è¦é‡æ–°è¿è¡Œè·å–æ–°é“¾æ¥</li>
                    <li>å»ºè®®åœ¨æäº¤å‰æµ‹è¯•é“¾æ¥æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®</li>
                    <li>å¯ä»¥åŒæ—¶åˆ†äº«ç»™è€å¸ˆå’ŒåŒå­¦æŸ¥çœ‹</li>
                </ul>
            </div>
        </div>
        
        <!-- é¡µè„š -->
        <footer>
            <p>é¢éƒ¨è¯†åˆ«æŠ€æœ¯ç ”ç©¶é¡¹ç›® | åŸºäºRunoobåœ¨çº¿å¹³å°åˆ›å»º</p>
            <p style="margin-top: 10px; opacity: 0.8;">æŠ€æœ¯æ”¯æŒï¼šHTML5 â€¢ CSS3 â€¢ JavaScript â€¢ å“åº”å¼è®¾è®¡</p>
            
            <div class="tech-stack">
                <div class="tech-badge">
                    <i class="fas fa-code"></i> å‰ç«¯å¼€å‘
                </div>
                <div class="tech-badge">
                    <i class="fas fa-robot"></i> äººå·¥æ™ºèƒ½
                </div>
                <div class="tech-badge">
                    <i class="fas fa-shield-alt"></i> å®‰å…¨ç ”ç©¶
                </div>
                <div class="tech-badge">
                    <i class="fas fa-mobile-alt"></i> ç§»åŠ¨é€‚é…
                </div>
            </div>
            
            <p style="margin-top: 20px; font-size: 0.9rem;">
                é¡¹ç›®é“¾æ¥ï¼š<span id="footerUrl"></span>
            </p>
        </footer>
    </div>
    
    <script>
        // ============ å…¨å±€å˜é‡ ============
        let registeredUsers = [];
        let faceEmbeddings = {};
        
        // ============ æ ‡ç­¾é¡µåˆ‡æ¢ ============
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾æŒ‰é’®çš„æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹
            document.getElementById(tabName).classList.add('active');
            
            // æ¿€æ´»å¯¹åº”çš„æ ‡ç­¾æŒ‰é’®
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => {
                if (btn.textContent.includes(getTabTitle(tabName))) {
                    btn.classList.add('active');
                }
            });
            
            // å¦‚æœæ˜¯éƒ¨ç½²é¡µé¢ï¼Œæ›´æ–°URLæ˜¾ç¤º
            if (tabName === 'deploy') {
                updateUrlDisplay();
            }
            
            // å¦‚æœæ˜¯åŸå‹é¡µé¢ï¼ŒåŠ è½½ç”¨æˆ·åˆ—è¡¨
            if (tabName === 'prototype') {
                loadUsers();
            }
        }
        
        function getTabTitle(tabName) {
            const titles = {
                'home': 'é¦–é¡µ',
                'research': 'æŠ€æœ¯ç ”ç©¶', 
                'prototype': 'ç³»ç»ŸåŸå‹',
                'deploy': 'è·å–é“¾æ¥'
            };
            return titles[tabName] || tabName;
        }
        
        // ============ é¢éƒ¨æ‰«æåŠŸèƒ½ ============
        function startFaceScan() {
            const scannerFrame = document.querySelector('.scanner-frame');
            const scanLine = document.querySelector('.scan-line');
            
            // æ·»åŠ æ‰«ææ•ˆæœ
            scannerFrame.style.transform = 'scale(1.05)';
            scannerFrame.style.boxShadow = '0 0 30px rgba(66, 133, 244, 0.5)';
            
            // é‡ç½®æ‰«æçº¿åŠ¨ç”»
            scanLine.style.animation = 'none';
            setTimeout(() => {
                scanLine.style.animation = 'scan 2s linear infinite';
            }, 10);
            
            // æ·»åŠ ç‰¹å¾ç‚¹åŠ¨ç”»
            const landmarks = document.querySelectorAll('.landmark-point');
            landmarks.forEach((landmark, index) => {
                landmark.style.transform = 'translate(-50%, -50%) scale(1.5)';
                landmark.style.transition = 'transform 0.3s';
                setTimeout(() => {
                    landmark.style.transform = 'translate(-50%, -50%) scale(1)';
                }, 300 + index * 100);
            });
            
            // æ¨¡æ‹Ÿå¤„ç†æ—¶é—´
            setTimeout(() => {
                const resultDiv = document.getElementById('registerResult');
                resultDiv.innerHTML = `
                    <div style="color: #34A853;">
                        <h4><i class="fas fa-check-circle"></i> é¢éƒ¨æ‰«æå®Œæˆ</h4>
                        <p>âœ“ æˆåŠŸæ£€æµ‹åˆ°é¢éƒ¨</p>
                        <p>âœ“ æå–68ä¸ªç‰¹å¾ç‚¹</p>
                        <p>âœ“ ç”Ÿæˆ128ç»´ç‰¹å¾å‘é‡</p>
                        <p>âœ“ å¤„ç†æ—¶é—´ï¼š1.2ç§’</p>
                    </div>
                `;
                resultDiv.style.display = 'block';
                
                // æ¢å¤åŸçŠ¶
                scannerFrame.style.transform = 'scale(1)';
                scannerFrame.style.boxShadow = 'none';
                
                // ä¿å­˜é¢éƒ¨ç‰¹å¾
                const faceCode = generateFaceEmbedding();
                localStorage.setItem('lastFaceEmbedding', faceCode);
                
            }, 2000);
        }
        
        // ============ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ ============
        function registerUser() {
            const name = document.getElementById('userName').value.trim();
            const id = document.getElementById('userID').value.trim();
            const role = document.getElementById('userRole').value;
            const resultDiv = document.getElementById('registerResult');
            
            // éªŒè¯è¾“å…¥
            if (!name || !id) {
                resultDiv.innerHTML = `
                    <div style="color: #EA4335;">
                        <h4><i class="fas fa-exclamation-triangle"></i> æ³¨å†Œå¤±è´¥</h4>
                        <p>è¯·å¡«å†™å®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯</p>
                    </div>
                `;
                resultDiv.style.display = 'block';
                return;
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²æ‰«æé¢éƒ¨
            const faceEmbedding = localStorage.getItem('lastFaceEmbedding');
            if (!faceEmbedding) {
                resultDiv.innerHTML = `
                    <div style="color: #EA4335;">
                        <h4><i class="fas fa-exclamation-triangle"></i> éœ€è¦é¢éƒ¨æ•°æ®</h4>
                        <p>è¯·å…ˆè¿›è¡Œé¢éƒ¨æ‰«æ</p>
                    </div>
                `;
                resultDiv.style.display = 'block';
                return;
            }
            
            // åˆ›å»ºç”¨æˆ·å¯¹è±¡
            const user = {
                id: id,
                name: name,
                role: role,
                faceEmbedding: faceEmbedding,
                registeredAt: new Date().toLocaleString(),
                lastAccess: new Date().toLocaleString()
            };
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            let users = JSON.parse(localStorage.getItem('faceRecognitionUsers') || '[]');
            users.push(user);
            localStorage.setItem('faceRecognitionUsers', JSON.stringify(users));
            
            // æ›´æ–°å…¨å±€å˜é‡
            registeredUsers = users;
            faceEmbeddings[id] = faceEmbedding;
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            resultDiv.innerHTML = `
                <div style="color: #34A853;">
                    <h4><i class="fas fa-check-circle"></i> æ³¨å†ŒæˆåŠŸï¼</h4>
                    <p>ç”¨æˆ·ï¼š<strong>${name}</strong> (${id})</p>
                    <p>ç±»å‹ï¼š${getRoleName(role)}</p>
                    <p>é¢éƒ¨ç‰¹å¾å·²å®‰å…¨å­˜å‚¨</p>
                    <div style="background: #e8f5e9; padding: 10px; border-radius: 8px; margin-top: 10px; font-family: monospace; font-size: 0.9rem;">
                        ç‰¹å¾ç ï¼š${faceEmbedding.substring(0, 32)}...
                    </div>
                </div>
            `;
            resultDiv.style.display = 'block';
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('userName').value = '';
            document.getElementById('userID').value = '';
            
            // æ›´æ–°ç”¨æˆ·åˆ—è¡¨
            loadUsers();
        }
        
        function getRoleName(role) {
            const roles = {
                'student': 'å­¦ç”Ÿ',
                'teacher': 'æ•™å¸ˆ',
                'staff': 'å‘˜å·¥',
                'admin': 'ç®¡ç†å‘˜'
            };
            return roles[role] || role;
        }
        
        // ============ é¢éƒ¨éªŒè¯åŠŸèƒ½ ============
        function verifyFace() {
            const resultDiv = document.getElementById('verifyResult');
            
            // æ¨¡æ‹Ÿé¢éƒ¨éªŒè¯è¿‡ç¨‹
            resultDiv.innerHTML = `
                <div style="color: #4285F4;">
                    <h4><i class="fas fa-search"></i> é¢éƒ¨éªŒè¯ä¸­...</h4>
                    <p>æ­£åœ¨æå–é¢éƒ¨ç‰¹å¾...</p>
                    <div class="progress-bar" style="height: 5px; background: #e0e0e0; border-radius: 3px; margin: 10px 0;">
                        <div id="verifyProgress" style="height: 100%; width: 0%; background: #4285F4; border-radius: 3px; transition: width 2s;"></div>
                    </div>
                </div>
            `;
            resultDiv.style.display = 'block';
            
            // æ¨¡æ‹Ÿè¿›åº¦æ¡
            setTimeout(() => {
                document.getElementById('verifyProgress').style.width = '50%';
            }, 500);
            
            setTimeout(() => {
                document.getElementById('verifyProgress').style.width = '100%';
                
                // æ¨¡æ‹ŸåŒ¹é…ç»“æœ
                setTimeout(() => {
                    const users = JSON.parse(localStorage.getItem('faceRecognitionUsers') || '[]');
                    
                    if (users.length === 0) {
                        resultDiv.innerHTML = `
                            <div style="color: #EA4335;">
                                <h4><i class="fas fa-times-circle"></i> éªŒè¯å¤±è´¥</h4>
                                <p>æœªæ‰¾åˆ°åŒ¹é…çš„ç”¨æˆ·</p>
                                <p>è¯·å…ˆæ³¨å†Œç”¨æˆ·</p>
                            </div>
                        `;
                    } else {
                        // éšæœºé€‰æ‹©ä¸€ä¸ªç”¨æˆ·ä½œä¸ºåŒ¹é…ç»“æœ
                        const randomUser = users[Math.floor(Math.random() * users.length)];
                        const confidence = (95 + Math.random() * 4).toFixed(1);
                        
                        resultDiv.innerHTML = `
                            <div style="color: #34A853;">
                                <h4><i class="fas fa-check-circle"></i> éªŒè¯æˆåŠŸï¼</h4>
                                <p>åŒ¹é…ç”¨æˆ·ï¼š<strong>${randomUser.name}</strong></p>
                                <p>ç”¨æˆ·IDï¼š${randomUser.id}</p>
                                <p>ç”¨æˆ·ç±»å‹ï¼š${getRoleName(randomUser.role)}</p>
                                <p>ç½®ä¿¡åº¦ï¼š${confidence}%</p>
                                <p>éªŒè¯æ—¶é—´ï¼š${new Date().toLocaleTimeString()}</p>
                            </div>
                        `;
                    }
                }, 500);
            }, 1000);
        }
        
        // ============ ç”¨æˆ·ç®¡ç†åŠŸèƒ½ ============
        function loadUsers() {
            const userListDiv = document.getElementById('userList');
            const users = JSON.parse(localStorage.getItem('faceRecognitionUsers') || '[]');
            
            if (users.length === 0) {
                userListDiv.innerHTML = `
                    <div style="text-align: center; padding: 30px; background: white; border-radius: 10px;">
                        <i class="fas fa-users" style="font-size: 3rem; color: #ddd; margin-bottom: 15px;"></i>
                        <p>æš‚æ— æ³¨å†Œç”¨æˆ·</p>
                        <p style="color: #666; font-size: 0.9rem;">è¯·å…ˆæ³¨å†Œæ–°ç”¨æˆ·</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div style="display: grid; gap: 15px;">';
            
            users.forEach((user, index) => {
                html += `
                    <div style="background: white; padding: 20px; border-radius: 10px; border-left: 5px solid #4285F4;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h4 style="margin: 0;">${user.name}</h4>
                                <p style="margin: 5px 0 0 0; color: #666; font-size: 0.9rem;">
                                    ID: ${user.id} | ç±»å‹: ${getRoleName(user.role)}
                                </p>
                                <p style="margin: 5px 0 0 0; color: #999; font-size: 0.8rem;">
                                    æ³¨å†Œæ—¶é—´: ${user.registeredAt}
                                </p>
                            </div>
                            <div>
                                <span style="background: #e8f4fd; color: #4285F4; padding: 5px 10px; border-radius: 15px; font-size: 0.9rem;">
                                    <i class="fas fa-user-check"></i> å·²æ³¨å†Œ
                                </span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            userListDiv.innerHTML = html;
        }
        
        // ============ éƒ¨ç½²é¡µé¢åŠŸèƒ½ ============
        function updateUrlDisplay() {
            const urlDiv = document.getElementById('projectUrl');
            const footerUrl = document.getElementById('footerUrl');
            const currentUrl = window.location.href;
            
            urlDiv.innerHTML = `
                <span style="color: #4285F4; font-weight: bold;">${currentUrl}</span>
                <br><br>
                <small style="color: #666;">
                    <i class="fas fa-external-link-alt"></i> å°†æ­¤é“¾æ¥å¤åˆ¶å¹¶åˆ†äº«ç»™ä»–äºº
                </small>
            `;
            
            footerUrl.textContent = currentUrl;
        }
        
        function copyProjectUrl() {
            const url = window.location.href;
            
            // åˆ›å»ºä¸´æ—¶è¾“å…¥æ¡†è¿›è¡Œå¤åˆ¶
            const tempInput = document.createElement('input');
            tempInput.value = url;
            document.body.appendChild(tempInput);
            tempInput.select();
            tempInput.setSelectionRange(0, 99999);
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    alert('âœ… é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼\n\n' + url);
                }
            } catch (err) {
                alert('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶åœ°å€æ é“¾æ¥');
            }
            
            document.body.removeChild(tempInput);
        }
        
        function testProjectUrl() {
            const url = window.location.href;
            window.open(url, '_blank');
            
            // æ˜¾ç¤ºæç¤º
            setTimeout(() => {
                alert('ğŸ”— å·²åœ¨æ–°çª—å£æ‰“å¼€é“¾æ¥ï¼Œè¯·ç¡®è®¤å†…å®¹æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºã€‚');
            }, 500);
        }
        
        function showQRCode() {
            const qrContainer = document.getElementById('qrCodeContainer');
            if (qrContainer.style.display === 'none') {
                qrContainer.style.display = 'block';
                
                // æ»šåŠ¨åˆ°äºŒç»´ç åŒºåŸŸ
                qrContainer.scrollIntoView({ behavior: 'smooth' });
            } else {
                qrContainer.style.display = 'none';
            }
        }
        
        // ============ è¾…åŠ©å‡½æ•° ============
        function generateFaceEmbedding() {
            // ç”Ÿæˆ128ä½é¢éƒ¨ç‰¹å¾ç ï¼ˆæ¨¡æ‹Ÿï¼‰
            const chars = '0123456789ABCDEF';
            let embedding = '';
            for (let i = 0; i < 32; i++) {
                embedding += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return embedding;
        }
        
        // ============ é¡µé¢åˆå§‹åŒ– ============
        window.onload = function() {
            // åŠ è½½ç”¨æˆ·æ•°æ®
            const users = JSON.parse(localStorage.getItem('faceRecognitionUsers') || '[]');
            registeredUsers = users;
            
            // æ›´æ–°éƒ¨ç½²é¡µé¢çš„URLæ˜¾ç¤º
            updateUrlDisplay();
            
            // åŠ è½½ç”¨æˆ·åˆ—è¡¨
            loadUsers();
            
            // æ·»åŠ é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', function(event) {
                // Ctrl+1 é¦–é¡µ
                if (event.ctrlKey && event.key === '1') {
                    switchTab('home');
                    event.preventDefault();
                }
                // Ctrl+2 ç ”ç©¶é¡µé¢
                else if (event.ctrlKey && event.key === '2') {
                    switchTab('research');
                    event.preventDefault();
                }
                // Ctrl+3 åŸå‹é¡µé¢
                else if (event.ctrlKey && event.key === '3') {
                    switchTab('prototype');
                    event.preventDefault();
                }
                // Ctrl+4 éƒ¨ç½²é¡µé¢
                else if (event.ctrlKey && event.key === '4') {
                    switchTab('deploy');
                    event.preventDefault();
                }
                // Ctrl+C å¤åˆ¶é“¾æ¥
                else if (event.ctrlKey && event.key === 'c') {
                    copyProjectUrl();
                    event.preventDefault();
                }
            });
            
            console.log('é¢éƒ¨è¯†åˆ«é¡¹ç›®å·²åŠ è½½');
        };
    </script>
</body>
</html>
